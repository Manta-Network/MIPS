# MIP-0001 : MantaPay Protocol

```
Number:  MIP-0001
Title:   MantaPay Protocol
Type:    Standard
Status:  Draft
Authors: Shumo Chu (shumo@manta.network)
Created: 2021-06-18
```

## Abstract

`MIP-0001` describes the MantaPay protocol. This is inteneded to be an "informal" treatment
of the protocol that optimizes readablilty. The formal treatment of the protocol can be 
found in this [eprint](https://eprint.iacr.org/2021/743).


## Primitives

* *zkSNARK*: public-verifiable preprocessing zero-knowledge Succinct Non-interactive ARgument 
of Knowledge. zkSNARK is a proof system that verifies computation expressed in a circuit. 
Given a field F, a zkSANRK for F-arithmetic circuit satisfablility is defined by a triple of 
polynomial algorithms (`KeyGen`, `Prove`, `Verify`):
    1. `KeyGen`(1<sup>&lambda;</sup>, `C`) &rarr; (`pk`, `vk`). Taken a security parameter 
    &lambda; (e.g. 128 bits) and a F-arithmeic circuit `C`, `KeyGen` samples a pair of keys, 
    namely a proving key `pk` and a verification key `vk`. (`pk`, `vk`) is usually referred 
    as the public parameter or common reference string (CRS).
    2. `Prove`(`pk`, `x`, `a`) &rarr; &pi;. Taken a proving key `pk`, public input `x`, and 
    witness `a` as input, the proving function `Prove` (called by the prover) outputs a
    non-interactive zero-knowledge proof of the designated statement defined by `C`.
    3. `Verify`(`vk`, `x`, &pi;) &rarr; {0, 1}. Taken a verification key `vk`, and a 
    zero-knowledge proof &pi;, `Verify` (called by the verifier) outputs 1 if the prover is convinced that `C` is true, outputs 0 otherwise.
  A zkSNARK satisfies the following properties:
    - *Completeness*. An honest prover must convince the verifier with high probability 
      1 - `negl`(&lambda;).
    - *Soundness*. If the verifier accepts a proof from a prover with bounded computational
      power, then the prover must know the secrets input corresponding to the witness of the 
      given instance.
    - *Succinctness*. An honest-generated proof &pi; has constant size and the `Verify` runs 
      in time linear to `x`.
    - *Zero-Knowledge*. An honestly-generated proof is perfect zero knowledge 
      (the formal definition is based on the notion of the simulator, please refer to 
      A.1 section of the eprint).
* *Commitment* (`COMM`). A non-interactive commitment scheme `COMM` that is both hiding and
  binding (either computational or information theoretical). For example, given a random 
  seed `r`and a message `m`, the commitment is `c` := `COMM`<sub>r</sub>(`m`). `c` can be 
  opened by revealing `r` and `m`, which verifies the commitment.
* *Pseudo-Random Function* (`PRF`). More specifically, we use three labeled pseudo-random
  functions that instantiated from the same core function. For a seed `x`, we derive 
  `PRF`<sub>`x`</sub><sup>`addr`</sup>(&middot;), 
  `PRF`<sub>`x`</sub><sup>`vn`</sup>(&middot;), and
  `PRF`<sub>`x`</sub><sup>`pk`</sup>(&middot;), which is used to generate addresses, 
  void numbers, and public keys, accordingly. Currently, manta uses `Blake2s` as the core 
  function.
* *Cryptographic Accumulators* (`acc`). `acc` supports efficient, zero-knowledge, 
  membership proofs. Currrently, manta uses merkle tree with pedersen hashes as the `CRH` 
  (collision resistence hash).
* *Elliptic Curve Integrated Encryption Scheme* (`ECIES`). `ECIES` is build on top of 
  (elliptic curve) Diffie-Hellman key exchange protocol, a key derivation function and a 
  block cipher. `ECIES` is used to encrypt the nomination of the UTXO using the receiver's 
  public key. 